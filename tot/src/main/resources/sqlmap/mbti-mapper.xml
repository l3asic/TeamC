<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mbti.mapper">

<select id="beforecompare" resultType="android.mainburger.MainBurgerNoticeVO">
select *
select  board.*
    from(
    select rownum as rn1, c.* 
    from(
   select  mbti.* from(
    select  b.*, abs(a.mbti_activity+ b.mbti_activity) +
    abs(a.mbti_festival+ b.mbti_festival)+
    abs(a.mbti_tour+ b.mbti_tour)+
    abs(a.mbti_solo+ b.mbti_solo)+
    abs(a.mbti_couple+ b.mbti_couple)+
    abs(a.mbti_buddys+ b.mbti_buddys)+
    abs(a.mbti_family+ b.mbti_family)+
    abs(a.mbti_price+ b.mbti_price)+
    abs(a.mbti_sd+ b.mbti_sd)+
    abs(a.mbti_io+ b.mbti_io) as matchscore
    from (select * from tbl_mbti where member_id='ChaMinHwan') a ,(select * from tbl_mbti where member_id is null) b 
    order by matchscore) mbti 
    ) c
    where rownum <![CDATA[ <= ]]> 100
     order by DBMS_RANDOM.VALUE(1,500 )
    ) d , tbl_board board
where rownum <![CDATA[ <= ]]>10 and d.board_sn = board.board_sn

    
    
    

</select>

</mapper>